const utils = require("../../utils");
const addFilteredData = (array, subset, data) => utils.isSubsetOf(subset, data) ? array.push(data) : array;
const addData = (array, data) => array.push(data);
const get = async (parser, predicate) => {
    const foundData = [];
    // changes behavior if a predicate is given
    const filterData = predicate
        ? data => addFilteredData(foundData, predicate, data)
        : data => addData(foundData, data);
    const events = {
        onData: filterData
    };
    await parser.read(events);
    return foundData;
};
module.exports = get;
